<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zys.dao.ImageInfoMapper">
  <!--
        <resultMap type="me.gacl.domain.Classes" id="ClassResultMap4">
           <id property="id" column="c_id"/>
           <result property="name" column="c_name"/>
           <association property="teacher" column="teacher_id" javaType="me.gacl.domain.Teacher" select="getTeacher2"></association>
            在实体中可以在次使用select语句查询实体封装到包含的（实体）中如下列
           <collection property="students" ofType="me.gacl.domain.Student" column="c_id" select="getStudent"></collection>
        </resultMap>

        <select id="getTeacher2" parameterType="int" resultType="me.gacl.domain.Teacher">
           SELECT t_id id, t_name name FROM teacher WHERE t_id=#{id}
        </select>

        <select id="getStudent" parameterType="int" resultType="me.gacl.domain.Student">
           SELECT s_id id, s_name name FROM student WHERE class_id=#{id}
        </select>
  -->
  <resultMap id="BaseResultMap" type="com.zys.entitys.ImageInfo">
    <!--  用于在实例化类时，注入结果到构造方法中 -->
    <constructor>
      <idArg column="id" javaType="java.lang.Integer" jdbcType="INTEGER" />
      <idArg column="img_url" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="login_id" javaType="java.lang.Integer" jdbcType="INTEGER"/>
    </constructor>
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, img_url, login_id
  </sql>
  <select id="selectByPrimaryKey" parameterType="com.zys.entitys.ImageInfoKey" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <include refid="Base_Column_List"/>
    from image_info
    where id = #{id,jdbcType=INTEGER}
    and img_url = #{imgUrl,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="com.zys.entitys.ImageInfoKey">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from image_info
    where id = #{id,jdbcType=INTEGER}
      and img_url = #{imgUrl,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.zys.entitys.ImageInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into image_info (id, img_url, login_id
    )
    values (#{id,jdbcType=INTEGER}, #{imgUrl,jdbcType=VARCHAR}, #{loginId,jdbcType=INTEGER}
    )
  </insert>
  <insert id="insertSelective" parameterType="com.zys.entitys.ImageInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into image_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="imgUrl != null">
        img_url,
      </if>
      <if test="loginId != null">
        login_id,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="imgUrl != null">
        #{imgUrl,jdbcType=VARCHAR},
      </if>
      <if test="loginId != null">
        #{loginId,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.zys.entitys.ImageInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update image_info
    <set>
      <if test="loginId != null">
        login_id = #{loginId,jdbcType=INTEGER},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
    and img_url = #{imgUrl,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.zys.entitys.ImageInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update image_info
    set login_id = #{loginId,jdbcType=INTEGER}
    where id = #{id,jdbcType=INTEGER}
    and img_url = #{imgUrl,jdbcType=VARCHAR}
  </update>
  <select id="searchName" resultMap="BaseResultMap" parameterType="java.lang.String">
  SELECT * FROM image_info i
  WHERE i.`login_id` IN(SELECT id FROM login_user where `name` = #{ name })
  </select>
  <select id="searchUrlToId" resultMap="BaseResultMap" parameterType="java.lang.Integer">
    select * from image_info i WHERE i.`login_id`=#{ userId}
  </select>
</mapper>